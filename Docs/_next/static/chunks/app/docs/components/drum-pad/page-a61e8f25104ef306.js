(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{177:(e,t,n)=>{Promise.resolve().then(n.bind(n,3611))},3567:(e,t,n)=>{"use strict";n.d(t,{hw:()=>d});var r=n(8081),a=n(2149),i=n(6522),o=n(4483);let s=a.createContext({outputs:[],inputs:[],isSupported:!1,isEnabled:!1,requestMidiAccess:async()=>!1,sendNoteOn:()=>{},sendNoteOff:()=>{},sendAftertouch:()=>{},sendChannelAftertouch:()=>{},sendPitchBend:()=>{},sendControlChange:()=>{},setActiveOutput:()=>{}}),l=()=>a.useContext(s);function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.QP)((0,i.$)(t))}let d=a.forwardRef((e,t)=>{let{className:n,label:i,subLabel:o,note:s=60,channel:d=1,velocity:u=127,disabled:h=!1,size:m="md",radius:p="md",ledColor:x="rgba(255, 255, 255, 0.9)",use1DVelocity:f=!1,invert1DVelocity:b=!1,useTemperatureColor:g=!1,animationStyle:v="instant",animationDuration:w=200,mpeMode:y="none",mpeSensitivity:M=5,longPressDuration:P=300,ledClassName:N,padClassName:j,isForcePressed:T=!1,midiOutput:C="none",midiOutputId:k,onPadDown:D,onPadUp:E,onPadTrigger:S,onMPEChange:I,...A}=e,[$,O]=a.useState(!1),[R,B]=a.useState(u),[L,_]=a.useState(!1),[z,Y]=a.useState({}),[U,G]=a.useState(1),X=a.useRef(null),V=a.useRef(null),F=a.useRef(!1),K=a.useRef(0),Q=a.useRef(0),W=function(){let[e,t]=a.useState(!1);return a.useEffect(()=>{let e=()=>{let e=window.navigator.userAgent;t(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}(),q=l(),H=$||T,J=a.useRef(T),Z=a.useRef($);a.useEffect(()=>{let e=J.current||Z.current,t=T||$;!e&&t?(_(!0),null==D||D(s,R,d,z),null==S||S(s,R,d,z),("web-midi"===C||"mpe"===C)&&q.sendNoteOn(s,R,d)):e&&!t&&(null==E||E(s,R,d,z),("web-midi"===C||"mpe"===C)&&q.sendNoteOff(s,R,d)),J.current=T,Z.current=$},[T,$,s,R,d,z,D,S,E,C,q]),a.useEffect(()=>{"none"!==y&&F.current&&I&&Object.keys(z).length>0&&I(s,z)},[y,s,z,I]);let ee=W?Math.max(100,P/2):P,et=e=>{if(!X.current||!f)return u;let t=X.current.getBoundingClientRect(),n=t.height,r=Math.max(0,Math.min(1,(e-t.top)/n));return Math.round(126*(r=b?r:1-r))+1},en=(e,t)=>{if("none"===y||!F.current||!X.current)return;let n=X.current.getBoundingClientRect(),r=n.height,a=n.width,i=Math.max(-1,Math.min(1,(K.current-t)/(r/2))),o=Math.max(-1,Math.min(1,(e-Q.current)/(a/2))),l=M/5*i,c=M/5*o,u={...z,y:i,x:o};("aftertouch"===y||"full"===y)&&(u.aftertouch=Math.round(Math.max(0,Math.min(127,64+63*l))),u.pressure=Math.max(0,Math.min(1,.5+.5*l)),("web-midi"===C||"mpe"===C)&&q.sendAftertouch(s,u.aftertouch,d)),("pitchbend"===y||"full"===y)&&(u.pitchBend=Math.round(Math.max(0,Math.min(16383,8192+8191*c))),("web-midi"===C||"mpe"===C)&&q.sendPitchBend(u.pitchBend,d)),("timbre"===y||"full"===y)&&(u.timbre=Math.round(Math.max(0,Math.min(127,64+63*l))),("web-midi"===C||"mpe"===C)&&q.sendControlChange(74,u.timbre,d)),er(u),Y(u),I&&I(s,u)},er=e=>{"none"!==y&&e?void 0!==e.pressure?G(e.pressure):void 0!==e.aftertouch&&G(e.aftertouch/127):f&&G(R/127)},ea=e=>{!h&&$&&(e.preventDefault(),V.current&&(clearTimeout(V.current),V.current=null),O(!1),F.current=!1)},ei=e=>{"touch"!==e.pointerType&&!h&&$&&(V.current&&(clearTimeout(V.current),V.current=null),O(!1),F.current=!1,e.currentTarget.releasePointerCapture(e.pointerId))};a.useEffect(()=>{if(L){let e=setTimeout(()=>{_(!1)},w);return()=>clearTimeout(e)}},[L,w]),a.useEffect(()=>()=>{V.current&&clearTimeout(V.current)},[]);let eo=((e,t)=>{if(!g)return e;let n=e.match(/rgba?$$(\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?$$/);if(!n)return e;let r=(t-1)/126,a=Math.min(255,Number.parseInt(n[1])+Math.round(100*r)),i=Number.parseInt(n[2]),o=Math.min(255,Number.parseInt(n[3])+Math.round((1-r)*100)),s=e.includes("rgba")?e.match(/rgba?$$[\d\s,]+,\s*([\d.]+)$$/)[1]:"0.9";return"rgba(".concat(a,", ").concat(i,", ").concat(o,", ").concat(s,")")})(x,R),es=Math.max(5,Math.round(20*U)),el=Math.max(.3,U);return(0,r.jsxs)("button",{ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),X.current=e},type:"button",disabled:h,className:c("relative flex flex-col items-center justify-center select-none overflow-hidden touch-none",{sm:"w-16 h-16 text-xs",md:"w-20 h-20 text-sm",lg:"w-24 h-24 text-base",xl:"w-32 h-32 text-lg",xxl:"w-40 h-40 text-xl"}[m],{none:"rounded-none",sm:"rounded-md",md:"rounded-lg",lg:"rounded-xl",full:"rounded-full"}[p],"bg-black/40 backdrop-blur-glass border border-white/10","shadow-glass-outer hover:shadow-[0_0_20px_rgba(255,255,255,0.15)]",H&&"shadow-glass-inner transform scale-[0.98] transition-transform",h&&"opacity-50 cursor-not-allowed",j,n),onTouchStart:e=>{if(h)return;e.preventDefault();let t=e.touches[0],n=et(t.clientY);B(n),G(n/127),Q.current=t.clientX,K.current=t.clientY,"none"!==y&&(F.current=!1,V.current=setTimeout(()=>{F.current=!0,Y({aftertouch:0,pitchBend:8192,timbre:64,pressure:0,x:0,y:0})},ee)),O(!0),_(!0)},onTouchMove:e=>{if(h||!$)return;e.preventDefault();let t=e.touches[0];if("none"!==y&&F.current)en(t.clientX,t.clientY);else if(f){let e=et(t.clientY);B(e),G(e/127)}},onTouchEnd:ea,onTouchCancel:ea,onPointerDown:e=>{if("touch"===e.pointerType||h)return;let t=et(e.clientY);B(t),G(t/127),Q.current=e.clientX,K.current=e.clientY,"none"!==y&&(F.current=!1,V.current=setTimeout(()=>{F.current=!0,Y({aftertouch:0,pitchBend:8192,timbre:64,pressure:0,x:0,y:0})},P)),O(!0),_(!0),e.currentTarget.setPointerCapture(e.pointerId)},onPointerMove:e=>{if("touch"!==e.pointerType&&!h&&$){if("none"!==y&&F.current)en(e.clientX,e.clientY);else if(f){let t=et(e.clientY);B(t),G(t/127)}}},onPointerUp:ei,onPointerLeave:ei,onPointerCancel:ei,...(()=>{let{note:e,channel:t,velocity:n,ledColor:r,use1DVelocity:a,invert1DVelocity:i,useTemperatureColor:o,animationStyle:s,animationDuration:l,mpeMode:c,mpeSensitivity:d,longPressDuration:u,ledClassName:h,padClassName:m,isForcePressed:p,midiOutput:x,midiOutputId:f,onPadDown:b,onPadUp:g,onPadTrigger:v,onMPEChange:w,...y}=A;return y})(),children:[(0,r.jsx)("div",{className:c("absolute inset-0 transition-opacity",H?"opacity-100":"opacity-0",N),style:{backgroundColor:eo,opacity:H?el:0,boxShadow:H?"0 0 ".concat(es,"px ").concat(Math.round(es/2),"px ").concat(eo,", inset 0 0 ").concat(Math.round(es/2),"px ").concat(Math.round(es/4),"px ").concat(eo):"none",transition:"opacity ".concat(w,"ms, box-shadow ").concat(w,"ms")},children:H&&(0,r.jsx)("div",{className:(()=>{if(!L)return"";let e="absolute inset-0 pointer-events-none",t="duration-".concat(w);switch(v){case"fade":return c(e,"opacity-0 animate-in fade-in",t);case"radial":return c(e,"scale-0 origin-center animate-in zoom-in",t);case"top-down":return c(e,"scale-y-0 origin-top animate-in slide-in-from-top",t);case"bottom-up":return c(e,"scale-y-0 origin-bottom animate-in slide-in-from-bottom",t);case"left-right":return c(e,"scale-x-0 origin-left animate-in slide-in-from-left",t);case"right-left":return c(e,"scale-x-0 origin-right animate-in slide-in-from-right",t);default:return c(e)}})(),style:{backgroundColor:eo}})}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[i&&(0,r.jsx)("span",{className:c("font-medium tracking-wide text-shadow",H?"text-black":"text-white"),children:i}),o&&(0,r.jsx)("span",{className:c("text-xs mt-1 opacity-80",H?"text-black/80":"text-white/80"),children:o})]}),(0,r.jsx)("div",{className:c("absolute bottom-1 right-1 text-[0.6rem] opacity-60",H?"text-black/80":"text-white/80"),children:s}),f&&H&&(0,r.jsx)("div",{className:"absolute top-1 left-1 text-[0.6rem] bg-black/40 px-1 rounded",style:{color:eo},children:R}),"none"!==y&&F.current&&(0,r.jsx)("div",{className:"absolute top-1 right-1 w-2 h-2 rounded-full bg-white animate-pulse"})]})});d.displayName="MidiPad"},3611:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(8081),a=n(2149),i=n(3567),o=n(6522),s=n(4483);function l(e){let{className:t,rows:n=4,columns:l=4,baseNote:c=36,channel:d=1,padSize:u="md",padRadius:h="md",gap:m="md",animationStyle:p="instant",colorMap:x,labelMap:f,onPadDown:b,onPadUp:g,onPadTrigger:v,onMPEChange:w,use1DVelocity:y=!1,useTemperatureColor:M=!1,mpeMode:P="none",mpeSensitivity:N=5,multiTouchEnabled:j=!0,midiOutput:T,midiOutputId:C,...k}=e,[D,E]=a.useState(new Map),S=a.useRef(null),I=(e,t)=>{let r=(e*l+t)/(n*l)*360;return"hsla(".concat(r,", 100%, 70%, 0.9)")},A=(e,t,n)=>"".concat(n),$=a.useCallback(e=>{var t;if(!j)return;e.preventDefault(),e.stopPropagation();let r=null===(t=S.current)||void 0===t?void 0:t.getBoundingClientRect();if(!r)return;let a=new Map(D);Array.from(e.touches).forEach(e=>{let t=e.clientX-r.left,i=e.clientY-r.top,o=Math.floor(t/(r.width/l)),s=Math.floor(i/(r.height/n));if(s>=0&&s<n&&o>=0&&o<l){let t=c+(s*l+o);a.set(e.identifier,t)}}),E(a)},[D,c,l,j,n]),O=a.useCallback(e=>{var t;if(!j)return;e.preventDefault(),e.stopPropagation();let r=null===(t=S.current)||void 0===t?void 0:t.getBoundingClientRect();if(!r)return;let a=new Map(D);Array.from(e.touches).forEach(e=>{let t=e.clientX-r.left,i=e.clientY-r.top,o=Math.floor(t/(r.width/l)),s=Math.floor(i/(r.height/n));if(s>=0&&s<n&&o>=0&&o<l){let t=c+(s*l+o);a.has(e.identifier)&&a.get(e.identifier)!==t&&a.set(e.identifier,t)}else a.delete(e.identifier)}),E(a)},[D,c,l,j,n]),R=a.useCallback(e=>{if(!j)return;e.preventDefault(),e.stopPropagation();let t=new Map(D);Array.from(e.changedTouches).forEach(e=>{t.delete(e.identifier)}),E(t)},[D,j]),B=a.useCallback(e=>Array.from(D.values()).includes(e),[D]);return a.useEffect(()=>{let e=S.current;if(!e||!j)return;let t=e=>{e.preventDefault()};return e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("touchmove",t,{passive:!1}),e.addEventListener("touchend",t,{passive:!1}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",t),e.removeEventListener("touchend",t)}},[j]),(0,r.jsx)("div",{ref:S,className:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.QP)((0,o.$)(t))}("grid",{none:"gap-0",sm:"gap-2",md:"gap-4",lg:"gap-6"}[m],"bg-black/30 backdrop-blur-glass p-6 rounded-2xl border border-white/5 shadow-glass-outer touch-none",t),style:{gridTemplateColumns:"repeat(".concat(l,", minmax(0, 1fr))")},onTouchStart:$,onTouchMove:O,onTouchEnd:R,onTouchCancel:R,...k,children:(()=>{let e=[];for(let t=0;t<n;t++)for(let n=0;n<l;n++){let a=c+(t*l+n),o=x?x(t,n):I(t,n),s=f?f(t,n,a):A(t,n,a);e.push((0,r.jsx)(i.hw,{note:a,channel:d,label:s,size:u,radius:h,ledColor:o,animationStyle:p,onPadDown:b,onPadUp:g,onPadTrigger:v,use1DVelocity:y,useTemperatureColor:M,mpeMode:P,mpeSensitivity:N,isForcePressed:B(a),onMPEChange:w,midiOutput:T,midiOutputId:C},"pad-".concat(t,"-").concat(n)))}return e})()})}function c(){let[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)(null),[s,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(new Set);return(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-black to-zinc-900",children:(0,r.jsxs)("div",{className:"p-4 md:p-8",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("header",{className:"mb-8 text-center",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-light tracking-wide mb-2 text-white",children:"Drum Pad Component"}),(0,r.jsx)("p",{className:"text-sm md:text-base text-white/70 max-w-2xl mx-auto",children:"Interactive MIDI pad and grid controllers for expressive input."})]}),(0,r.jsxs)("div",{className:"glass-container p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-white/80 mb-6 text-center",children:"Interactive Examples"}),(0,r.jsxs)("div",{className:"mb-10",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4 text-white/90 text-center",children:"Single Drumpad"}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)(i.hw,{note:60,label:"Kick",ledColor:e?"rgba(56, 182, 255, 0.9)":"rgba(56, 182, 255, 0.4)",onPadTrigger:(e,n)=>{t(!0),o(e),c(n),setTimeout(()=>t(!1),200)},onPadUp:()=>t(!1),size:"lg",animationStyle:"radial"}),null!==n&&(0,r.jsxs)("p",{className:"text-white/70 text-sm",children:["Note: ",n,", Velocity: ",s]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4 text-white/90 text-center",children:"Drum Pad Grid (4x4)"}),(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(l,{rows:4,columns:4,baseNote:36,onPadTrigger:(e,t)=>{u(t=>new Set(t).add(e))},onPadUp:e=>{u(t=>{let n=new Set(t);return n.delete(e),n})},activeNotes:d,labelMap:(e,t,n)=>"N".concat(n)}),(0,r.jsxs)("p",{className:"text-white/70 text-sm mt-2",children:["Active Notes: ",Array.from(d).join(", ")]})]})]}),(0,r.jsx)("p",{className:"mt-6 text-center text-white/70 max-w-xl mx-auto",children:"Try clicking or tapping the pads! These examples showcase basic interaction. The components offer rich customization for velocity, MPE, and visual feedback."})]}),(0,r.jsxs)("div",{className:"glass-container p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-white mb-4",children:"About the Drum Pad Components"}),(0,r.jsxs)("div",{className:"prose prose-invert max-w-none text-white/80",children:[(0,r.jsxs)("p",{children:["The Drum Pad components (",(0,r.jsx)("code",{children:"MidiPad"})," and ",(0,r.jsx)("code",{children:"MidiPadGrid"}),") provide versatile interfaces for MIDI input. They are designed to be highly responsive and customizable, supporting features like velocity sensitivity, MPE (MIDI Polyphonic Expression), and various visual feedback styles."]}),(0,r.jsx)("p",{children:"Whether you need a single expressive pad or a full grid controller, these components offer the building blocks for creating dynamic musical interfaces within your web applications. They can be integrated with the Web MIDI API or used as standalone UI elements."})]})]}),(0,r.jsxs)("div",{className:"glass-container p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-white mb-4",children:"Props"}),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:'\n    <div class="overflow-x-auto">\n      <table class="min-w-full text-sm text-left text-white/80">\n        <thead class="text-xs text-white/60 uppercase bg-black/20">\n          <tr>\n            <th scope="col" class="px-4 py-3">Prop Name</th>\n            <th scope="col" class="px-4 py-3">Type</th>\n            <th scope="col" class="px-4 py-3">Default</th>\n            <th scope="col" class="px-4 py-3">Description</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr class="border-b border-white/10">\n            <td class="px-4 py-3 font-medium">note</td>\n            <td class="px-4 py-3"><code>number</code></td>\n            <td class="px-4 py-3"><code>60</code></td>\n            <td class="px-4 py-3">The MIDI note number for the pad.</td>\n          </tr>\n          <tr class="border-b border-white/10">\n            <td class="px-4 py-3 font-medium">label</td>\n            <td class="px-4 py-3"><code>string</code></td>\n            <td class="px-4 py-3"><code>\'\'</code></td>\n            <td class="px-4 py-3">A display label for the pad.</td>\n          </tr>\n          {/* ... more props for MidiPad and MidiPadGrid ... */}\n        </tbody>\n      </table>\n    </div>\n  '}})]}),(0,r.jsxs)("div",{className:"glass-container p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-white mb-4",children:"Usage"}),(0,r.jsx)("pre",{className:"bg-black/60 rounded-lg p-4 overflow-x-auto text-white/80 text-sm",children:(0,r.jsx)("code",{children:'\nimport { MidiPad, MidiPadGrid } from "@/components/ui/midi-pad"; // Adjust path if needed\nimport { useState } from "react";\n\nexport default function MyDrumComponent() {\n  const [activeNotes, setActiveNotes] = useState(new Set());\n\n  const handlePadTrigger = (note, velocity) => {\n    console.log(`Pad ${note} triggered with velocity ${velocity}`);\n    // Add to active notes or send MIDI message\n  };\n\n  return (\n    <div>\n      <MidiPad note={60} label="Kick" onPadTrigger={handlePadTrigger} />\n      <MidiPadGrid \n        rows={2} \n        columns={2}\n        baseNote={36}\n        onPadTrigger={(note, vel) => console.log(`Grid pad ${note} at ${vel}`)}\n        onPadUp={(note) => console.log(`Grid pad ${note} released`)}\n      />\n    </div>\n  );\n}\n  '})})]})]}),(0,r.jsx)("footer",{className:"text-center text-white/50 text-sm py-8 border-t border-zinc-800 max-w-4xl mx-auto mt-12",children:(0,r.jsx)("p",{children:"AudioUI Drum Pad Component • MIT License"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[144,497,954,358],()=>t(177)),_N_E=e.O()}]);